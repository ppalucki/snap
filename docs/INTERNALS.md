# Internals

## Overview

```
       +-----------+
       | Scheduler |
       +----+------+                                                                                
            |                                    is a      +-----------------+  produce  +--------+ 
  run as Job|                                    +-------->| CollectorPlugin +---------->+ Metric |  
            v                                    |         +-----------------+           +---+----+  
        +------+     defined as                  |                                           |bytes       
        | Task +---------+                       |                                           |       
        +-+----+         v                +----------+ is a +-----------------+              |       
          |       +----------+ build from |          |----->| ProccesorPlugin |<-------------+       
 according|       | Workflow +----------->|  Plugin  |      +-----------------+              |       
          v       +----------+            |          |            |bytes                     |  
  +-----------+                           +----------+            v                          |
  | Schedule  |                              ^   | is a    +-----------------+               |  
  +-----------+                              |   +-------->| PublisherPlugin |<--------------+ 
                                             |             +------+----------+
                                       manage|                    |
  +---------------+   through  +---------+   |                    |              +------------+
- | pluginManager |----------->| Session |-->|                    |store in      |  External  |
  +---------------+            +---------+   |                    +------------->|  storage   |
         |                                   |                                   +------------+
         |                                   |provide to
         |                +---------+        |  
         +---------- -----> config  +--------+  
                          +---------+
                                                                    
```                                                                 
                                                                                                               
## Dependencies                                                                                                

Note: common packages as core/serror were removed from graphs for clarity.

### Core package
```                                                                                                          
                                                                                                             
                                                                                                             
               +-----------+  +---------+                                                                    
               |core/ctypes|  |pkg/ctree|<---------                                                          
               +-----------+  +---------+         |                                                                                                                                                 
                   ^              ^               |                                                                                                                                                  
                   |              |           +----------+                                                                                                                                           
                   |<-------------+-----------|core/cdata|<---+                                                                                                                                      
                   |              |           +----------+    |                                                                                                                                      
                   |<-------------+--------+      ^           |                                                                                                                                      
                   |              |        |      |           |                                                                                                              
+------------+ +----------------------+   +--------------+    |                                                                                                              
|pkg/schedule| |control/plugin/cpolicy|   |scheduler/wmap|    |                                                                                                              
+------------+ +----------------------+   +--------------+    |                                                                                                              
      ^            ^                              ^           |                                                                                                              
      |------------|------------------------------|-----------+                                                                                                                                      
                   |                                                                                                                                                                                 
               +------+                                                                                                                                                                              
               | core |                                                                                                                                                                              
               +------+                                                                                                                                                                              
                                                                                                                                                                                                     
```                                                                                                                                                                                                     
### Scheduler package
```                                                                                                            
                                                                                                               
   +----------------+   +--------------+   +------+   +------------+   +--------------+                                                                                       
   |intelsdi-x/gomit|   |control/plugin|   | core |   |pkg/schedule|   |scheduler/wmap|                                                                                       
   +----------------+   +--------------+   +------+   +------------+   +--------------+                                                           
       ^                 ^                    ^             ^                ^                                                                                                                       
       |                /                     |             |                |                                                                                                                       
       |               /            +--------------------+  |                |
       |    +----------             |core/scheduler_event|  |                |                                                                                                                       
       |    |                       +--------------------+  |                |                                                                                                                       
       |    |                                 ^             |                |                                                                                                                       
    +---------+                               |             |                |                                                                                                                       
    |scheduler|-------------------------------+-------------+----------------+                                                                                                                       
    +---------+                                                                                                                                                                                      
                                                                                                                           
                                 
                                                                                                                  
```                                                                                                                             
### External "plugins" & control/plugin package                             
```                                                                                                        
        +---------+   +-----------+    
        |pkg/ctree|   |core/ctypes|<----------------------------------------------------------------+
        +---------+   +-----------+                                                                 |
             ^            ^    ^                                                                    |
             |            |    |                                                                    |                         
             |            |  +----------+                                                           |                         
             +------------|--|core/cdata|<----------------------------------------------------------|                         
             |            |  +----------+                                                           |                         
             |            |       ^                                                                 |                         
        +----------------------+  |  +-----------------------+     +------------------------+    +------+                     
        |control/plugin/cpolicy|  |  |control/plugin/encoding|     |control/plugin/encrypter|    | core |                     
        +----------------------+  |  +-----------------------+     +------------------------+    +------+                     
              ^                   |            ^                             ^                      ^                         
              |                   |            |                             |                      |                         
        +----------------+        |            |                             |                      |                         
        | control/plugin |--------+------------+-----------------------------+----------------------+                         
        +----------------+                                                                                                    
              ^                                                                                                               
              |                                                                                                               
        +-----------+                                                                                                         
        + "plugins" |                                                                                                         
        +-----------+                                                                                                         
                                                                                                                              
```                                                                                                                      
                                                                                                             
### Control package                                                                                          
TBD
```                                                                                                          
```                                            
                                           
### Mgmt package                           
TBD
```
```
